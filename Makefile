.PHONY: setup install env-copy db-test db-migrate

setup: install env-copy
	@echo "ğŸ‰ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸï¼"
	@echo "é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã«ã¯: pnpm dev"

install:
	@echo "ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­..."
	pnpm install

env-copy:
	@echo "ğŸ“ ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ä¸­..."
	@if [ ! -f .env ]; then \
		cp .env.example .env; \
		echo "âœ… .env.example ã‚’ .env ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ"; \
	elif [ -f .env ]; then \
		echo "âš ï¸  .env ã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™"; \
	else \
		echo "âŒ .env.example ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"; \
		exit 1; \
	fi

db-test:
	@echo "ğŸ”Œ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆä¸­..."
	pnpm db:test
	@echo "âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚§ãƒƒã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼"

db-migrate:
	@echo "ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œä¸­..."
	pnpm db:migrate